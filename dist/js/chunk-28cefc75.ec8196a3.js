(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28cefc75"],{7842:function(e,t,a){"use strict";var n=a("8142"),s=a.n(n);s.a},8142:function(e,t,a){},bbd9:function(e,t,a){"use strict";var n=a("c3c3"),s=a.n(n);s.a},c3c3:function(e,t,a){},c428:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cargador"},[a("div",{staticClass:"lds-dual-ring"})])}],o={name:"loading",props:{}},c=o,r=(a("bbd9"),a("2877")),i=Object(r["a"])(c,n,s,!1,null,"06e81036",null);t["a"]=i.exports},ee79:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chat"},[a("div",{staticClass:"contacto fixed"},[a("div",{staticClass:"contacto-img"}),a("div",{staticClass:"contacto-info"},[a("h4",[e._v(e._s(e.receptorUsername))]),a("router-link",{attrs:{to:{name:"list"}}},[a("img",{staticClass:"flecha-chat",attrs:{src:"/flecha-gris.svg",alt:""}})])],1)]),a("div",{staticClass:"conversacion"},[e.loading?a("loading",{staticClass:"flex justify-center items-center mt-12"}):e._l(e.mensajes,function(t){return a("div",{key:t.id,staticClass:"mensaje-recibido",class:{"mensaje-enviado":t.fields.emisor==e.$route.params.emisor}},[a("p",[e._v(e._s(t.fields.texto))])])})],2),a("div",{staticClass:"input-texto"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.textoNuevoMensaje,expression:"textoNuevoMensaje"}],attrs:{type:"text"},domProps:{value:e.textoNuevoMensaje},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.nuevoMensaje(t)},input:function(t){t.target.composing||(e.textoNuevoMensaje=t.target.value)}}}),a("button",{on:{click:function(t){return t.preventDefault(),e.nuevoMensaje(t)}}},[a("i",{staticClass:"far fa-comment-alt"})])])])},s=[],o=a("c428"),c={name:"chat",props:["emisor","receptor"],components:{loading:o["a"]},data:function(){return{loading:!0,receptorUsername:"",emisorUsername:"",mensajes:[],textoNuevoMensaje:"",tiempoRefresco:1e3}},mounted:function(){var e=this;axios.get("https://api.airtable.com/v0/appKu3WYsSg5zDj92/usuarios/".concat(e.$route.params.emisor)).then(function(t){e.emisorUsername=t.data.fields.username,axios.get("https://api.airtable.com/v0/appKu3WYsSg5zDj92/usuarios/".concat(e.$route.params.receptor)).then(function(t){e.receptorUsername=t.data.fields.username,e.cargarMensaje(),setInterval(e.cargarMensaje,e.tiempoRefresco)}).catch(function(e){console.log(e)}).then(function(){})}).catch(function(e){console.log(e)}).then(function(){})},methods:{cargarMensaje:function(){var e=this;axios.get('https://api.airtable.com/v0/appKu3WYsSg5zDj92/mensajes?view=Grid%20view&filterByFormula=OR(AND({Emisor}="'.concat(e.emisorUsername,'", {Receptor}="').concat(e.receptorUsername,'"), AND({Emisor}="').concat(e.receptorUsername,'", {Receptor}="').concat(e.emisorUsername,'"))')).then(function(t){t.data.records.length!=e.mensajes.length&&(e.mensajes=t.data.records)}).catch(function(e){console.log(e)}).then(function(){e.loading=!1})},nuevoMensaje:function(){var e=this;axios.post("https://api.airtable.com/v0/appKu3WYsSg5zDj92/mensajes",{fields:{texto:e.textoNuevoMensaje,emisor:[e.$route.params.emisor],receptor:[e.$route.params.receptor]}}).then(function(t){e.cargarMensaje(),e.textoNuevoMensaje=""}).catch(function(e){console.log(e)}).then(function(){})},updated:function(){window.scrollTo(0,document.body.scrollHeight)}}},r=c,i=(a("7842"),a("2877")),u=Object(i["a"])(r,n,s,!1,null,"02195394",null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-28cefc75.ec8196a3.js.map